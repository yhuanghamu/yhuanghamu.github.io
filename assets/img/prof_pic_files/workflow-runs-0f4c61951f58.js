"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["workflow-runs"],{25945:(e,t,n)=>{n.d(t,{r:()=>r});async function r(e){try{let t=await fetch(e,{credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(t.ok)return await t.json()}catch{}return null}},32645:(e,t,n)=>{n.d(t,{$:()=>SignalRSocket,C:()=>r});var r,s=n(16544),i=n(25945);function o(e,t,n){return function(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}(e,t),!function(e,t){if(void 0===e)throw TypeError("attempted to get private static field before its declaration")}(n,0),n.get?n.get.call(e):n.value}!function(e){e[e.Invocation=1]="Invocation",e[e.StreamItem=2]="StreamItem",e[e.Completion=3]="Completion",e[e.StreamInvocation=4]="StreamInvocation",e[e.CancelInvocation=5]="CancelInvocation",e[e.Ping=6]="Ping",e[e.Close=7]="Close"}(r||(r={}));let SignalRSocket=class SignalRSocket extends EventTarget{static getInstance(e){return o(SignalRSocket,SignalRSocket,l).has(e)||o(SignalRSocket,SignalRSocket,l).set(e,new SignalRSocket(e)),o(SignalRSocket,SignalRSocket,l).get(e)}socketDidReceiveMessage(e,t){let n=t.split(SignalRSocket.RECORD_SEPARATOR)[0],r=JSON.parse(n);this.dispatchEvent(new CustomEvent("socketDidReceiveMessage",{detail:r})),7===r.type&&e.close()}socketDidOpen(){this.handshake()}socketDidClose(){}socketDidFinish(){if(this.globalSocket=null,this.shouldTryAgainWithNewSocket){this.shouldTryAgainWithNewSocket=!1;let e=Math.floor(Math.random()*SignalRSocket.JITTER_MAX_MILLISECONDS)+SignalRSocket.JITTER_MIN_MILLISECONDS;setTimeout(()=>this.startOrContinueStreaming(this.xhrConnectionUrl,!0),e)}}socketShouldRetry(e,t){return t===SignalRSocket.ABNORMAL_CLOSURE?(this.shouldTryAgainWithNewSocket=!0,!1):!this.isFatalStatusCode(t)}async startOrContinueStreaming(e,t=!1){this.xhrConnectionUrl||(this.xhrConnectionUrl=e),(!this.isStreaming||t)&&(this.isStreaming=!0,await this.tryStartNewStream(this.xhrConnectionUrl))}closeExistingSocket(){this.globalSocket&&(this.globalSocket.close(),this.globalSocket=null)}onStreamFailure(){this.dispatchEvent(new CustomEvent("onStreamFailure"))}get reconnectWindow(){let e=Math.floor(Math.random()*SignalRSocket.JITTER_MAX_MILLISECONDS)+SignalRSocket.JITTER_MIN_MILLISECONDS;return e}async tryStartNewStream(e){try{let t=await this.retrieveSocketURL(e);if(!t)return;this.socketUrl=t,this.globalSocket=new s.Oo(this.socketUrl,this,{timeout:4e3,attempts:10}),await this.globalSocket.open()}catch(e){throw this.onStreamFailure(),e}}handshake(){let{searchParams:e}=new URL(this.socketUrl,window.location.origin),t=e.get("tenantId"),n=e.get("runId");if(t&&n){this.sendPayload({protocol:"json",version:1});let e={arguments:[t,+n],target:this.target,type:1};this.sendPayload(e)}}isFatalStatusCode(e){return e===SignalRSocket.POLICY_VIOLATION}sendPayload(e){this.globalSocket&&this.globalSocket.send(JSON.stringify(e)+SignalRSocket.RECORD_SEPARATOR)}constructor(e){super(),this.target=e,this.isStreaming=!1,this.shouldTryAgainWithNewSocket=!1,this.retrieveSocketURL=async e=>{let t=await (0,i.r)(e),n=t?.data.authenticated_url;if(!n)return null;let r=await (0,i.r)(n);return r?.logStreamWebSocketUrl??null}}};SignalRSocket.RECORD_SEPARATOR="\x1e",SignalRSocket.ABNORMAL_CLOSURE=1006,SignalRSocket.POLICY_VIOLATION=1008,SignalRSocket.JITTER_MIN_MILLISECONDS=100,SignalRSocket.JITTER_MAX_MILLISECONDS=400;var l={writable:!0,value:new Map}},40621:(e,t,n)=>{var r,s,i,o,l,a,c,d,u,h,p,g,f,m,y=n(36162),b=n(67044);!function(e){e[e.Plain=0]="Plain",e[e.Command=1]="Command",e[e.Debug=2]="Debug",e[e.Error=3]="Error",e[e.Info=4]="Info",e[e.Section=5]="Section",e[e.Verbose=6]="Verbose",e[e.Warning=7]="Warning",e[e.Group=8]="Group",e[e.EndGroup=9]="EndGroup",e[e.Icon=10]="Icon",e[e.Notice=11]="Notice"}(r||(r={}));let S=/^.{27}Z /gm,k=/([{([]*https?:\/\/[a-z0-9]+(?:-[a-z0-9]+)*\.[^\s<>|'"]{2,})/gi,w={"(":")","[":"]","{":"}"},x=e=>w[e],L=e=>`\\${e}`,E=/(?:\u001b\[)(?:[?|#])?(?:(?:[0-9]{1,3})?(?:(?:;[0-9]{0,3})*)?[A-Z|a-z])/;!function(e){e.Reset="0",e.Bold="22",e.Italic="23",e.Underline="24",e.Set_Fg="38",e.Default_Fg="39",e.Set_Bg="48",e.Default_Bg="49"}(s||(s={}));let _={1:"bold",3:"italic",4:"underline"},C={40:"b",41:"r",42:"g",43:"y",44:"bl",45:"m",46:"c",47:"w",100:"gr"},I={30:"b",31:"r",32:"g",33:"y",34:"bl",35:"m",36:"c",37:"w",90:"gr"},j={0:"b",1:"r",2:"g",3:"y",4:"bl",5:"m",6:"c",7:"w"},A={0:0,1:51,2:102,3:153,4:204,5:255},T="command",R="debug",$="error",O="info",N="section",D="verbose",M="warning",q="group",P="endgroup",U="icon",B="notice",G={command:r.Command,debug:r.Debug,error:r.Error,info:r.Info,section:r.Section,verbose:r.Verbose,warning:r.Warning,notice:r.Notice,group:r.Group,endgroup:r.EndGroup,icon:r.Icon},W={0:"plain",1:T,2:R,3:$,4:O,5:N,6:D,7:M,8:q,9:P,10:U,11:B},F=[T,R,$,O,N,D,M,q,P,U,B];function J(e){return(e||"").toLocaleLowerCase()}!function(e){e[e.Standard=0]="Standard",e[e.Search=1]="Search",e[e.EOL=2]="EOL"}(i||(i={}));let Parser=class Parser{parse(e,t,n){let r=(0,y.dy)``,s=this.getStates(e);for(let e of s){let s;let i=[],o=[],l=e.output;if(e.style){let t=e.style.fg,n=e.style.bg,r=e.style.isFgRGB,s=e.style.isBgRGB;t&&!r&&i.push(`ansifg-${t}`),n&&!s&&(i.push(`ansibg-${n}`),i.push("d-inline-flex")),t&&r&&o.push(`color:rgb(${t})`),n&&s&&(o.push(`background-color:rgb(${n})`),i.push("d-inline-flex")),e.style.bold&&i.push("text-bold"),e.style.italic&&i.push("text-italic"),e.style.underline&&i.push("text-underline")}let a=-1,c=0,d=Array(l.length).fill(0);if(n){let e=n.selectedLine,r=n.lines.slice(0,100).map(e=>e.line);if(t===e||-1!==r.indexOf(t)){let e=n.text,t=1,r=J(l);for(;-1!==(a=r.indexOf(J(e),a+1))&&!(t>=50);){c=a+e.length;let n=l.substring(a,c);for(let e=0;e<n.length;e++)d[a+e]=1;t++}}}let u=n&&t===n.selectedLine?"select":"",h=(e,t)=>{let n;let r=e,s=d[e];for(let i=e;i<=e+t.length;i++){let o=i===e+t.length?2:d[i];if(s!==o){let e=l.substring(r,i);n=1===s?(0,y.dy)`${n}<span class="dt-fm ${u}">${e}</span>`:(0,y.dy)`${n}${e}`,s=o,r=i}}return n},p=l.split(k),g=0;for(let e of p)if(""!==e){if(e.match(k)){let t=e.match(/^[([{]*/),n=t?.[0]||"",r="";if(n){let t=[...n].map(x).map(L).reverse().join(""),s=Object.values(w).map(L).join(""),i=RegExp(`${t}[^${s}}>]*(?=$)`),o=e.match(i);r=o?.[0]||""}let i=e.replace(n,"").replace(r,""),o=h(g,n),l=h(g+n.length,i),a=h(g+n.length+i.length,r);s=(0,y.dy)`${s}${o}<a target="_blank" rel="noopener noreferrer" href="${i}"
              >${l}</a
            >${a}`}else{let t=h(g,e);s=(0,y.dy)`${s}${t}`}g+=e.length}r=(0,y.dy)`${r}<span class="${i.join(" ")}" style="${o.join(";")}">${s}</span>`}return r}parseLines(e){let t;let n=[],s=[],i=0,o=-1,l=!0,a="",c="",d=-1,u=()=>{c="",a=""},h=()=>{o=-1},p=()=>{d=-1},g=()=>{let n=F.indexOf(a);if(-1!==n){if(l=!1,h(),d=G[a],a===N||a===q||a===P||a===T||a===$||a===M||a===B){let t=e.substring(i,i+29)||"";if(!t.match(S)&&4>t.indexOf(a)){let t="##"===e.substring(i,i+2)?4:2;i=i+t+a.length}}a===q&&(f=!0),a===P&&t&&(m=!0)}u()},f=!1,m=!1,y=0,b=0;for(let S=0;S<e.length;S++){let k=e.charAt(S);if(l=!0,"\n"===k||S===e.length-1){"]"===k&&g();let e={type:d,start:i,end:S,lineIndex:n.length,groupCount:b},o=!1;d!==r.Plain?(o=!0,f&&(t=e,f=!1),m&&t&&(o=!0,e.group={lineIndex:t.lineIndex-1,nodeIndex:t.index},e.groupCount=b,t.isGroup=!0,m=!1,t=void 0,b++)):d===r.Plain&&(o=!0),o&&(e.index=y++,s.push(e)),t&&e!==t&&(e.group={lineIndex:t.lineIndex,nodeIndex:t.index}),s.length>0&&n.push({nodes:s}),s=[],i=S+1,h(),p(),u(),l=!1}else if("#"===k)(""===c||"#"===c)&&(l=!1,c+="#");else if("["===k)"##"===c?(l=!1,c+="["):0===c.length&&(l=!1,c+="[");else if("]"===k){if(a===U){let t=S+1,o=t;for(let n=t;n<e.length;n++){let t=e[n];if(" "===t){o=n;break}}s.push({type:r.Icon,lineIndex:n.length,start:t,end:o,index:y++,groupCount:b}),i=S=o+1;continue}g()}l&&(("##["===c||"["===c)&&(a+=k.toLowerCase()),a.length>8&&u(),-1===o&&(o=i,-1===d&&(d=r.Plain)))}return n}getStates(e){let t=[];if(!E.test(e))return[{output:e}];let n="",r="",s="",i={},o=!1,l=[];for(let a=0;a<e.length;a++){let c=e[a];if(o){if(";"===c)s&&(l.push(s),s="");else if("m"===c){if(s){o=!1,l.push(s),i.style=i.style||{};let e=!1,t=!1,a=!1,c=!1,d=[];for(let n of l){let r=i.style,s=parseInt(n);e&&a?(s>=0&&s<16?r.fg=this._get8BitColorClasses(s):s>=16&&s<256&&(r.fg=this._get8BitRGBColors(s),r.isFgRGB=!0),e=!1,a=!1):e&&c?s>=0&&s<256&&(d.push(s),3===d.length&&(r.fg=`${d[0]},${d[1]},${d[2]}`,r.isFgRGB=!0,d.length=0,e=!1,c=!1)):t&&a?(s>=0&&s<16?r.bg=this._get8BitColorClasses(s):s>=16&&s<256&&(r.bg=this._get8BitRGBColors(s),r.isBgRGB=!0),t=!1,a=!1):t&&c?s>=0&&s<256&&(d.push(s),3===d.length&&(r.bg=`${d[0]},${d[1]},${d[2]}`,r.isBgRGB=!0,d.length=0,t=!1,c=!1)):e||t?5===s?a=!0:2===s&&(c=!0):I[n]?r.fg=I[n]:C[n]?r.bg=C[n]:"0"===n?i.style={}:"48"===n?t=!0:"38"===n?e=!0:"39"===n?r.fg="":"49"===n?r.bg="":s>=91&&s<=97?r.fg=I[s-60]+"-br":s>=101&&s<=107?r.bg=C[s-60]+"-br":_[n]?r[_[n]]=!0:"22"===n?r.bold=!1:"23"===n?r.italic=!1:"24"===n&&(r.underline=!1)}n="",r="",s=""}else o=!1,n="",i.style={};l=[]}else isNaN(parseInt(c))?(s="",o=!1,n=""):4===s.length?(s="",o=!1,"\x1b"!==c&&(n="",r+=c)):s+=c;continue}if(n){if("\x1b"===n&&"["===c&&(o=!0,r)){let e;i.output=r,t.push(i),i.style&&(e=Object.assign({},i.style)),i={},e&&(i.style=e),r=""}continue}"\x1b"===c?n=c:r+=c}return r&&(i.output=r+(n||""),t.push(i)),t}_get8BitRGBColors(e){let t;return t=e<232?this._get216Color(e-16):this._get8bitGrayscale(e-232),`${t.r},${t.g},${t.b}`}_get8BitColorClasses(e){return e<8?`${j[e]}`:`${j[e-8]+"-br"}`}_get216Color(e){return{r:A[Math.floor(e/36)],g:A[Math.floor(e/6)%6],b:A[e%6]}}_get8bitGrayscale(e){let t=10*e+8;return{r:t,g:t,b:t}}};var H=n(6718);let z=e=>{let t;return(t=e.isError?(0,y.dy)`<span class="CheckStep-error-text">Error: </span>${e.lineContent}`:e.isWarning?(0,y.dy)`<span class="CheckStep-warning-text">Warning: </span>${e.lineContent}`:e.isNotice?(0,y.dy)`<span class="CheckStep-notice-text">Notice: </span>${e.lineContent}`:e.lineContent,e.isGroup)?(0,y.dy)`<details class="js-checks-log-group" open="${(0,H.o)(e.groupExpanded?"open":void 0)}"
      ><summary>${t}</summary></details
    >`:e.inGroup?(0,y.dy)`${"  "}${t}`:t},Y=e=>(0,y.dy)`
  <div class="js-check-step-line CheckStep-line d-flex ${e.className}">
    <a class="CheckStep-line-number d-inline-block text-mono text-normal flex-shrink-0" href="${e.lineUrl}"
      >${e.lineNumber}</a
    >
    ${e.timeStamp&&(0,y.dy)`<span class="CheckStep-line-timestamp text-mono text-normal ml-3 flex-shrink-0">${e.timeStamp}</span>`}
    <span class="CheckStep-line-content d-inline-block flex-auto ml-3 js-check-line-content"
      >${z(e)}</span
    >
  </div>
`,K=e=>(0,y.dy)`
  <div class="CheckRun-line d-flex ml-3 ${e.className}">
    ${e.timeStamp&&(0,y.dy)`<span class="CheckRun-line-timestamp text-mono text-normal ml-3 flex-shrink-0">${e.timeStamp}</span>`}
    <span class="d-inline-block flex-auto ml-3 js-check-line-content">${z(e)}</span>
  </div>
`,V=new Parser;let LogParser=class LogParser{updateLineMetaData(){let e=this.rawLogData.split(/\r?\n/),t=/^(.{27}Z) /;this.timestamps=[],this.logContent=e.map(e=>{let n=e.match(t),r=n&&new Date(n[1]),s="";return n&&r&&!isNaN(Number(r))&&(s=r.toUTCString(),e=e.substring(n[0].length)),this.timestamps.push(s),e}).join("\n"),this.lineMetaData=V.parseLines(this.logContent)}setData(e){this.rawLogData=e,this.updateLogLines()}appendData(e){this.rawLogData+=e,this.updateLogLines()}appendLines(e,t){let n=this.logLines.length,r=new Date().toISOString().replace("Z","0000Z"),s=e.map(e=>`${r} ${e}`).join("\n");if(this.appendData(`${n?"\n":""}${s}`),null!=t)for(let r=0;r<e.length;r++)this.logLineNumbers[n+r]=t+r}updateLogLines(){for(let e of(this.updateLineMetaData(),this.logLines=[],this.lineMetaData))this.logLines.push(...e.nodes)}setSelectedLine(e){this.findResult&&(this.findResult.selectedLine=e)}search(e,t){let n=this.findLines(e),r=t&&n.length>0?n[0].line:-1;return this.findResult={text:e,lines:n,selectedLine:r},n.map(e=>e.line)}findLines(e){let t=J(e),n=[];for(let e of this.logLines){let r=this.getNodeTextForSearch(e);if(J(r).indexOf(t)>=0&&(n.push({line:e.lineIndex}),n.length>=100))break}return n}cancelSearch(){this.findResult=void 0,this.updateLogLines()}renderTemplate(e,t,n){let{lineIndex:s}=e,i=this.logLineNumbers[s],o=null!=i?i:s+1,l=this.getNodeText(e),a=V.parse(l,s,this.findResult),c=`log-line-${W[e.type]}`,d={className:c,lineNumber:o,lineContent:a,timeStamp:this.timestamps[s],lineUrl:`${this.permalinkPrefix}:${o}`,isGroup:e.type===r.Group,inGroup:e.group?.lineIndex!=null,isError:e.type===r.Error,isWarning:e.type===r.Warning,isNotice:e.type===r.Notice,groupExpanded:t};return(d.lineNumber=d.lineNumber-e.groupCount,n)?K(d):Y(d)}getNodeText(e){return null==e.text&&(e.text=this.logContent.substring(e.start,e.end+1)),e.text}getNodeTextForSearch(e){e.text=this.getNodeText(e);let t=RegExp(E,"g");return e.text.replaceAll(t,"")}indexFromNumber(e){let t=this.logLineNumbers.indexOf(e);return t<0?e-1:t}constructor(e,t){this.rawLogData=e,this.permalinkPrefix=t,this.logContent="",this.lineMetaData=[],this.logLines=[],this.logLineNumbers=[],this.timestamps=[]}};var Z=n(76134),X=n(36071),Q=n(59753),ee=n(80449),et=n(71643);let en=null,er=!0,es=null,ei=!1,eo={};function el(){return Object.keys(eo).map(e=>eo[e])}let ea=()=>document.querySelector(".js-full-logs-container");(0,X.N7)(".js-full-logs-container",{constructor:HTMLElement,add(){ep(),eu()}});let ec=()=>{let e=ea(),t=e?.hasAttribute("data-ux-refresh");return e&&t};function ed(){(function(){let e=eh();null!==es&&!ei&&e<es&&(ei=!0),es=e})(),eq()}function eu(){let e=ec()?document:ea()||document;e.addEventListener("scroll",ed)}function eh(){return eU()?e$().scrollTop:window.scrollY}function ep(){var e;ec()&&!eU()?ea()?.style.removeProperty("height"):(e=ea())&&(e.style.height=`${window.innerHeight-e.getBoundingClientRect().top}px`)}ep(),eu(),window.addEventListener("resize",ep),function(e){e[e.INITIAL=0]="INITIAL",e[e.COMPLETED_LOGS_LOADING=1]="COMPLETED_LOGS_LOADING",e[e.COMPLETED_LOGS_LOADED=2]="COMPLETED_LOGS_LOADED",e[e.STREAMING=3]="STREAMING",e[e.ERROR=4]="ERROR"}(o||(o={}));let{href:eg,hash:ef}=window.location,em=eg.substring(0,eg.length-ef.length),ey={};function eb(e){let t=e.getAttribute("data-external-id");return t&&eo[t]||null}async function eS(e){let t=e.currentTarget,n=eb(t);n&&(ep(),ek(n)&&2!==n.state&&await e_(n),eq())}function ev(e){let t=e.currentTarget,n=eb(t);if(n){if(3!==n.state&&!ex(n)){e.preventDefault();return}n.container.hasAttribute("open")||n.container.setAttribute("manually-opened","")}}function ek(e){return e.container.hasAttribute("open")}function ew(e){en=null,e.container.setAttribute("open","open")}function ex(e){return e.container.getAttribute("data-log-url")}function eL(e){let{loader:t,chevron:n}=eP(e);t.setAttribute("hidden","hidden"),n.removeAttribute("hidden")}function eE(e){let{chevron:t}=eP(e);t.style.removeProperty("visibility"),e.container.style.removeProperty("pointer-events")}async function e_(e,t){if(t=t||{},1===e.state||2===e.state)return;let n=ex(e);if(!n)return;en=null,(t.scrollToBottom||t.permaLink)&&ew(e);let{downloadErrorMessage:r,downloadErrorMessageText:s}=eP(e);r.hidden=!0,function(e){let{loader:t,chevron:n}=eP(e);t.removeAttribute("hidden"),n.setAttribute("hidden","hidden")}(e),e.parser.setData(""),e.clusters=[],eP(e).logsContainer.textContent="",eE(e);try{e.state=1;let r=await fetch(n),i=r?.headers?.get("Content-Type")?.includes("text/html");if(!r.ok||i){let e;e=410===r.status?"data-removed-text":404===r.status?"data-not-found-text":"data-error-text";let t=s.getAttribute(e);throw s.textContent=t,Error("Response was not OK")}let o=r.body&&r.body.getReader&&r.body.getReader();if(o)await eI(e,o,t);else{let n=await r.text();await eA(e,n,t)}e.state=2,(0,et.b)({incrementKey:"ACTIONS_COMPLETED_LOG_VIEWS_SUCCEED"}),t.scrollToBottom&&eH(e,e.parser.logLines.length-1)}catch(t){throw e.state=4,r.hidden=!1,(0,et.b)({incrementKey:"ACTIONS_COMPLETED_LOG_VIEWS_FAIL"}),t}finally{eL(e)}}async function eC(e,t,n){if(ex(e))return;if(3!==e.state){let t=e.container.closest("check-step");t&&(t.setAttribute("data-in-progress",""),t.update())}if(e.state=3,0===t.length)return;let r=0===e.parser.rawLogData.length,s=e$(),i=eJ(e,e.parser.logLines.length-1),o=i?i.getBoundingClientRect().bottom:s.getBoundingClientRect().bottom,l=eU()?o<s.getBoundingClientRect().bottom:o<eO();er?er=!ei:(er=l)&&(ei=!1),await eA(e,t,{startLine:n});let{loader:a,logsContainer:c,downloadErrorMessage:d,animation:u}=eP(e);eE(e),e.parser.rawLogData.length>0&&!a.getAttribute("hidden")&&(a.setAttribute("hidden","hidden"),c.hidden=!1),d.hidden=!0,u&&u.removeAttribute("hidden"),r&&(ew(e),(0,et.b)({incrementKey:"ACTIONS_STREAMING_LOG_VIEWS_SUCCEED"})),ek(e)&&er&&(es=eh(),eH(e,e.parser.logLines.length-1))}async function eI(e,t,n){let r=0,s=new TextDecoder("utf-8");for(;;){let i=await t.read();if(i.done)break;let o=null==i.value?new Uint8Array(0):i.value;if((r+=o.length)>10485760){eP(e).truncatedMessage.hidden=!1;break}let l=s.decode(o);await eA(e,l,n)}}function ej(e){let t="CHECK-STEP"===e.tagName?"data-number":"data-step-number",n=e.getAttribute(t);return n?+n:-1}async function eA(e,t,n){n=n||{};let{logsContainer:r}=eP(e),s=e.clusters[e.clusters.length-1],i=s?s.startIndex:0,o=e.parser.logLines.length-1;for("string"==typeof t?e.parser.appendData(t):e.parser.appendLines(t,n.startLine),eF(e,[o]);i<e.parser.logLines.length;){let t=Math.min(i+50,e.parser.logLines.length)-1;if(s&&s.startIndex===i)s.visible?eM(e,s,s.endIndex+1,t):eR(e,s),s.endIndex=t;else{let n=document.createElement("div"),r={startIndex:i,endIndex:t,wrapper:n,visible:!1};eR(e,r),e.clusters.push(r)}i+=50}r.hidden=!1,n.keepLoader||eL(e),await eT(e,!0)}async function eT(e,t){let{logsContainer:n}=eP(e),r=n.childElementCount;if(e.clusters.length===r)return;let s=e.clusters[r];return n.append(s.wrapper),t&&eN(e,s),new Promise(n=>{setTimeout(async()=>{await eT(e,t&&s.visible),n()},0)})}function eR(e,t){let n=t.startIndex,r=0;for(;n<=t.endIndex;){let t=e.parser.logLines[n++],s=t.group?.lineIndex;(null==s||e.expandedGroups.has(s))&&r++}if(!t.visible){let e=t.height??20*r;t.wrapper.style.height=`${e}px`}}function e$(){return ea()||document.documentElement}function eO(){return ea()&&(!ec()||eU())?ea().offsetHeight:window.innerHeight}function eN(e,t){let n=e$(),{wrapper:r,visible:s}=t,i=ec()&&!eU()?-n.getBoundingClientRect().top:n.scrollTop,o=i>r.offsetTop+r.offsetHeight,l=i+eO()<r.offsetTop;o||l?eD(e,t,!1):s||eD(e,t,!0)}function eD(e,t,n){let{wrapper:r}=t,s=window.getSelection();s&&!s.isCollapsed&&s.containsNode(r,!0)&&(n=!0),n!==t.visible&&(n?(eM(e,t,t.startIndex,t.endIndex),r.style.height="auto"):(t.visible&&(t.height=r.offsetHeight||t.height),r.style.height=`${t.height}px`,r.textContent=""),t.visible=n)}function eM(e,t,n,r){let s=[];for(let e=n;e<=r;e++)s.push(e);let i=(0,y.dy)`
    ${(0,ee.r)(s,t=>{let n=eW(e,t);return n?(0,y.dy)`<div data-index="${t}">${n}</div>`:(0,y.dy)`<div data-index="${t}" hidden></div>`})}
  `,o=document.createElement("div");(0,y.sY)(i,o),t.wrapper.appendChild(o)}function eq(){if(en){let e=e$(),t=ec()?-e.getBoundingClientRect().top:e.scrollTop,n=t>en.offsetTop+en.offsetHeight,r=t+eO()<en.offsetTop;n||r||(en=null)}else for(let e of el())ek(e)&&function(e){if(e.state>=2)for(let t of e.clusters)eN(e,t)}(e)}function eP(e){let t=e.container.querySelector(".js-checks-log-display");return{logsContainer:t.querySelector(".js-checks-log-display-container"),loader:e.container.querySelector(".js-check-step-loader"),downloadErrorMessage:t.querySelector(".js-checks-log-display-error"),downloadErrorMessageText:t.querySelector(".js-checks-log-display-error-text"),animation:e.container.querySelector(".js-check-step-icon-animation"),truncatedMessage:t.querySelector(".js-checks-log-display-truncated"),chevron:e.container.querySelector(".js-check-step-chevron")}}function eU(){let e=document.querySelector(".js-check-steps");return!!e?.style?.position}function eB(e){e.parser.cancelSearch(),eF(e,e.searchLineIndexes),e.searchLineIndexes=[]}function eG(e,t,n){let r=eW(e,t);if(null===r){n.hidden=!0;return}n.hidden=!1,(0,y.sY)(r,n)}function eW(e,t){let n=e.parser.logLines[t],r=n.group?.lineIndex;if(null!=r&&!e.expandedGroups.has(r))return null;let s=n.isGroup&&e.expandedGroups.has(t);return e.parser.renderTemplate(n,!!s,!1)}function eF(e,t){for(let n of t){let t=eJ(e,n);t&&eG(e,n,t)}}function eJ(e,t){return e.container.querySelector(`[data-index='${t}']`)}function eH(e,t,n){let{select:r}=n||{};ew(e);let s=e.clusters.length<100;for(let n of e.clusters)(s||t-50<=n.endIndex&&t+50>=n.startIndex)&&eD(e,n,!0);let i=el().sort((e,t)=>e.number-t.number),o=i.findIndex(t=>t.number===e.number);ez(i,o,50-(t+1),!0);let l=50-(e.clusters[e.clusters.length-1].endIndex-t);ez(i,o,l,!1);let a=eJ(e,t);if(!a)return;let{hidden:c}=a;en=a,c&&function(e,t){let n=e.parser.logLines[t],r=n.group?.lineIndex;if(null==r)return;e.expandedGroups.add(r);let s=e.container.querySelector(`[data-index='${r}'] details`);s&&s.setAttribute("open","open")}(e,t),c&&r&&eG(e,t,a),r&&eY(a),setTimeout(async()=>{en?.scrollIntoView({behavior:s?"smooth":"auto",block:"center"})},0)}function ez(e,t,n,r){let s=n,i=r?-1:1,o=t+i;for(;s>0&&(r&&o>=0||!r&&o<e.length);){if(e[o].clusters?.length>0&&ek(e[o])){let t=e[o],n=r?t.clusters.length-1:0,i=t.clusters[n];eD(t,i,!0),s-=i.endIndex-i.startIndex+1}o+=i}}function eY(e){for(let e of document.querySelectorAll(".js-check-step-line.selected"))e.classList.remove("selected");e.querySelector(".js-check-step-line").classList.add("selected")}function eK(e,t,n){let r=e.parser.indexFromNumber(t);if(n)eH(e,r,{select:!0});else{let t=eJ(e,r);t&&eY(t)}}(0,Q.on)("change",".js-checks-log-fullscreen",function(){let e=document.querySelector(".js-check-steps");if(function(){let e=document.querySelector(".js-checks-log-fullscreen");(0,b.Tz)(e),(0,Z.Ty)()?e.setAttribute("data-hotkey",eU()?"Shift+F":"Shift+F,Escape"):e.setAttribute("data-hotkey",eU()?"":"Escape"),(0,b.N9)(e,e.dataset.shortcut)}(),es=null,eU()){if(ec()){let e=e$(),t=e.querySelectorAll(".js-check-step-summary"),n=document.querySelector(".js-checks-log-toolbar");for(let r of(ea()?.removeEventListener("scroll",ed),document.addEventListener("scroll",ed),e.classList.remove("overflow-y-scroll"),n.classList.add("uxr_CheckRun-header"),t))r.classList.add("uxr_CheckStep-header"),r.classList.remove("top-0"),r.style.removeProperty("sticky")}for(let t of["position","top","left","right","bottom","zIndex"])e.style.removeProperty(t);e.classList.add("rounded-md-1")}else{if(ec()){let e=e$(),t=e.querySelectorAll(".js-check-step-summary"),n=document.querySelector(".js-checks-log-toolbar");for(let r of(ea()?.addEventListener("scroll",ed),document.removeEventListener("scroll",ed),e.classList.add("overflow-y-scroll"),n.classList.remove("uxr_CheckRun-header"),t))r.classList.remove("uxr_CheckStep-header"),r.classList.add("top-0"),r.style.position="sticky"}e.style.position="fixed",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.zIndex="1000",e.classList.remove("rounded-md-1")}ep(),eq()});var eV=n(56959);let eZ=new LogParser("","");async function eX(e){let t=e.getAttribute("check-run-log-url");if(!t)return;let{blankSlate:n,logsContainer:r}={blankSlate:document.querySelector(".js-steps-blankslate"),logsContainer:e.querySelector(".js-check-run-log-display-container")};try{let e=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw Error("Response was not OK");let s=await e.text();eQ(n),await e0(r,s)}catch(e){throw e}finally{eQ(n)}}function eQ(e){e.setAttribute("hidden","hidden")}async function e0(e,t){"string"==typeof t?eZ.appendData(t):eZ.appendLines(t,0);let n=[];for(let e=0;e<eZ.logLines.length;e++)n.push(e);let r=(0,y.dy)`
    ${(0,ee.r)(n,e=>{let t=function(e){let t=eZ.logLines[e];return eZ.renderTemplate(t,!0,!0)}(e);return t?(0,y.dy)`<div data-index="${e}">${t}</div>`:(0,y.dy)`<div data-index="${e}" hidden></div>`})}
  `,s=document.createElement("div");(0,y.sY)(r,s),e.appendChild(s)}let e1=null,e2=null;function e4(){let e=window.location.hash.match(/^#step:(\d+):(\d+)$/)||[];e1=+e[1]||null,e2=+e[2]||null}if(e4(),(0,Q.on)("change",".js-checks-log-timestamps",e=>{let t=e.currentTarget,n=t.closest(".js-check-steps");n.classList.toggle("CheckRun-show-timestamps",t.checked)}),(0,X.N7)(".js-checks-log-details",{async add(e){let t=document.querySelector(".js-steps-blankslate");t&&(t.hidden=!0);let n=document.querySelector(".js-check-run-log-display");n&&(n.hidden=!0);let r=document.querySelector(".js-check-run-search");r&&(r.hidden=!1);let s=function(e,t){let n=ej(e),r=e.getAttribute("data-external-id")||"",s=new LogParser("",`${em}#step:${n}`),i={externalId:r,number:n,parser:s,container:e,searchLineIndexes:[],state:0,clusters:[],permalinkLine:void 0,expandedGroups:new Set};return function(e){let t=e.parentNode?.nodeName==="CHECK-STEP",n=t?e.parentElement:e,r=ej(n),s=[...n.parentElement.children];for(let e of s){if(e===n)break;let t=ej(e);+r<+t&&n.parentElement.insertBefore(n,e)}}(e),eo[r]=i,e.removeEventListener("toggle",eS),e.addEventListener("toggle",eS),e.removeEventListener("click",ev),e.addEventListener("click",ev),function(e){let t=ey[e.externalId];if(t){for(let t of Object.values(eo))e===t||t.container.hasAttribute("manually-opened")||function(e){e.container.removeAttribute("open");let t=e.container.closest("check-step");t&&(t.removeAttribute("data-in-progress"),t.removeAttribute("manually-opened"),t.update())}(t);eC(e,t,null),delete ey[e.externalId]}}(i),i}(e),i=e.getAttribute("data-expand")&&null===e1,o=s.number===e1;(o||i)&&(await e_(s,{keepLoader:!0,scrollToBottom:!o,permaLink:o}),o&&null!==e2&&eK(s,e2,!0))}}),(0,X.N7)(".js-check-run-blankslate",{subscribe:e=>(0,eV.RB)(e,"socket:message",function(e){let t=e.target,{has_steps:n}=e.detail.data;n&&t.remove()})}),(0,X.N7)(".js-steps-dropdown",{subscribe:e=>(0,eV.RB)(e,"socket:message",function(e){let t=e.target,{data:n}=e.detail,{log_archive:r,raw_logs:s}=n;if(r){let e=t.querySelector(".js-steps-dropdown-log-archive");e&&(e.hidden=!1)}if(s){let e=t.querySelector(".js-steps-dropdown-raw-logs");e&&(e.hidden=!1)}if(r||s){let e=t.querySelector(".js-steps-dropdown-divider");e&&(e.hidden=!1)}})}),(0,X.N7)(".js-check-run-log-display",{async add(e){await eX(e)}}),ResizeObserver){let e=e=>{let t=window.getComputedStyle(e),{borderBottomWidth:n,marginBottom:r}=t,s=document.getElementsByClassName("uxr_CheckStep-header");for(let t of s){let s=e.clientHeight+parseInt(r,10)+parseInt(n,10);t.style.top=`${s}px`}},t=new ResizeObserver(t=>{for(let n of t)e(n.target)});(0,X.N7)(".js-checks-log-toolbar",{constructor:HTMLElement,add(n){e(n),t.observe(n)},remove(e){t.unobserve(e)}})}async function e3(){if(e4(),null===e2)return;let e=el().find(e=>e.number===e1);e&&(await e_(e,{keepLoader:!0}),eK(e,e2,!1))}(0,Q.on)("click",".js-steps-dropdown-raw-logs",e=>{e.currentTarget.closest("details")?.removeAttribute("open")}),(0,Q.on)("toggle",".js-checks-log-group",e=>{let t=e.target,n=function(e){let t=e.closest(".js-checks-log-details");return el().find(e=>e.container===t)}(t);if(!n)return;let r=t.closest(".CheckStep-line"),s=r.parentElement;if(!s)return;let i=Number(s.getAttribute("data-index")||"0");!function(e,t,n){n?e.expandedGroups.add(t):e.expandedGroups.delete(t);let r=e.parser.logLines.filter(e=>e.group?.lineIndex===t);if(0===r.length)return;let s=r.map(e=>e.lineIndex),i=s[0],o=s[s.length-1];for(let t of e.clusters)if(t.startIndex<=o&&t.endIndex>=i&&(eR(e,t),en||eN(e,t),t.visible)){let n=s.filter(e=>e>=t.startIndex&&e<=t.endIndex);eF(e,n)}eq()}(n,i,t.hasAttribute("open"))},{capture:!0}),window.addEventListener("hashchange",e3,!1);var e6=n(46263);let e5=[],e7=-1;function e9(){return e5.length>0}function e8(){e9()&&te(e7+1>=e5.length?0:e7+1)}function te(e){let t=e5[e7],n=e5[e],r=el(),s=r[t.stepIndex],i=r[n.stepIndex];s.parser.setSelectedLine(-1),i.parser.setSelectedLine(n.lineIndex),eH(i,n.lineIndex,{select:!0}),e7=e}function tt(e,t){e5.length>0?tn(e):function(e,t){let n=e.querySelector(".js-checks-log-toolbar"),r=n.querySelector(".js-checks-log-search-previous"),s=n.querySelector(".js-checks-log-search-next"),i=n.querySelector(".js-checks-log-search-counter");i.textContent="0/0",i.hidden=t,r.disabled=!0,s.disabled=!0,r.hidden=t,s.hidden=t}(e,t)}function tn(e){let t=e.querySelector(".js-checks-log-toolbar"),n=t.querySelector(".js-checks-log-search-previous"),r=t.querySelector(".js-checks-log-search-next"),s=t.querySelector(".js-checks-log-search-counter"),i=t.querySelector(".js-checks-log-search-input");s.textContent=`${e7+1}/${e5.length}`,s.hidden=!1,n.hidden=!1,r.hidden=!1,n.disabled=!i.value,r.disabled=!i.value}(0,X.N7)(".js-check-steps-search",{constructor:HTMLElement,add(e){!function(e){let t=e.querySelector(".js-checks-log-toolbar"),n=t.querySelector(".js-checks-log-search-input");n.addEventListener("input",(0,e6.D)(()=>{if(n.value){var t;let e;t=n.value,e=!0,e5=el().reduce((n,r,s)=>{let i=function(e,t,n){eB(e);let r=e.parser.search(t,n);return e.searchLineIndexes=r,n&&r.length>0&&(eF(e,e.searchLineIndexes),eH(e,r[0],{select:!0})),r}(r,t,e);return i.length>0&&(e=!1),n.push(...i.map(e=>({lineIndex:e,stepIndex:s}))),n},[]),e7=0}else!function(){for(let e of(e5=[],e7=-1,el()))eB(e)}();tt(e,!1)},150)),n.addEventListener("focus",()=>tt(e,!1)),n.addEventListener("blur",()=>tt(e,!0))}(e)}}),(0,Q.on)("submit",".js-check-steps-search form.js-checks-log-search",e=>{e.preventDefault(),e8(),tt(e.target.closest(".js-check-steps-search"),!1)}),(0,Q.on)("click",".js-checks-log-search-previous",e=>{e9()&&te(e7-1<0?e5.length-1:e7-1),tn(e.target.closest(".js-check-steps-search"))}),(0,Q.on)("click",".js-checks-log-search-next",e=>{e8(),tn(e.target.closest(".js-check-steps-search"))});var tr=n(65935);let ts=!1;function ti(e){let t=document.importNode(e.content,!0),n=document.querySelector("#js-flash-container");for(let e of n.children)n.removeChild(e);n.appendChild(t)}function to(){for(let e of document.querySelectorAll(".js-selected-check-run"))e.remove();let e=document.querySelector(".js-zen-blankslate");e.hidden=!1,ts=!0}(0,tr.AC)(".js-check-suite-rerequest-form",async function(e,t){let n=e.closest("details");if(!n)return;n.removeAttribute("open");let r=document.querySelector("#js-selected-check-run");if(null!==r){let t=e.querySelector("input[name=only_failed_check_runs]"),n="true"===t.value,s="true"===r.getAttribute("data-failed");(!n||s)&&to()}try{await t.text(),ti(document.querySelector("#js-check-suite-rerequest-form-success"))}catch(e){throw ti(document.querySelector("#js-check-suite-rerequest-form-error")),e}}),(0,tr.AC)(".js-check-run-rerequest-form",async function(e,t){ts=!0;let n=document.querySelector("#js-selected-check-run");n.contains(e)&&to();try{await t.text(),ti(e.querySelector(".js-check-run-rerequest-form-success"))}catch(t){throw ti(e.querySelector(".js-check-run-rerequest-form-error")),t}}),(0,X.N7)(".js-latest-run-link",{constructor:HTMLElement,add(e){ts&&e.click()}});var tl=n(76006),ta=n(45974);function tc(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}let td=class CheckStepElement extends HTMLElement{get detailsDisabled(){return!this.loggedIn||!this.logUrl}get iconTemplate(){let e=this.inProgress?"step-icon-in-progress":`step-icon-${this.conclusion}`,t=document.getElementById(e)||document.getElementById("step-icon-other");if(t)return(0,ta.dy)([t.innerHTML])}get gearIcon(){let e=document.getElementById("primer-octicon-gear");if(e)return(0,ta.dy)([e.innerHTML])}get time(){return this.startedAt&&this.completedAt?this.preciseDuration():this.startedAt&&!this.jobCompleted?(0,ta.dy)`<relative-time format="elapsed" datetime="${this.startedAt}">
        Started at ${new Date(this.startedAt).getTime()}
      </relative-time>`:void 0}connectedCallback(){this.update()}preciseDuration(){let e=new Date(this.startedAt),t=new Date(this.completedAt),n=Math.round((t.getTime()-e.getTime())/1e3),r=Math.floor(n/60),s=n%60,i=Math.floor(r/60),o=Math.floor(i/24);return n<0?"0s":r<1?`${n}s`:i<1?`${r}m ${s}s`:o<1?`${i}h ${r%60}m ${s}s`:`${o}d ${i%24}h`}update(){let e=[];this.useActionsUx||e.push("position: sticky"),"skipped"===this.conclusion&&e.push("cursor: default"),eU()?e.push("top: 0px"):this.header?.style?.cssText&&e.push(this.header.style.cssText),(0,ta.sY)((0,ta.dy)`<details
        class="Details-element CheckStep rounded-2 details-reset js-checks-log-details ${this.useActionsUx?"px-2":"pl-2 pr-1"}"
        id="check-step-${this.number}"
        data-step-number="${this.number}"
        data-conclusion="${this.conclusion}"
        data-external-id="${this.externalId}"
        style="${this.detailsDisabled?"pointer-events:none;":""}"
        data-log-url="${this.detailsDisabled?"":this.logUrl}"
        data-expand="${this.expand?"true":""}"
      >
        <summary
          class="CheckStep-header p-2 mb-1 rounded-2 js-check-step-summary ${this.useActionsUx?"uxr_CheckStep-header mx-2":"ml-2 top-0"}"
          style="${e.join(";")}"
          data-retain-focus
          data-target="check-step.header"
          data-step-pending="${!this.conclusion}"
        >
          <div class="d-flex flex-items-center">
            ${this.loggedIn?(0,ta.dy)`<svg
                  class="octicon octicon-chevron-right js-check-step-chevron mr-2 flex-shrink-0 CheckStep-chevron"
                  viewBox="0 0 16 16"
                  version="1.1"
                  width="16"
                  height="16"
                  aria-hidden="${!this.logUrl}"
                  style="${this.logUrl?"":"visibility:hidden"}"
                >
                  <path
                    fill-rule="evenodd"
                    d="M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z"
                  ></path>
                </svg>`:""}

            <svg
              fill="none"
              height="16"
              viewBox="0 0 16 16"
              width="16"
              class="anim-rotate js-check-step-loader mr-2 flex-shrink-0"
              xmlns="http://www.w3.org/2000/svg"
              hidden
            >
              <g stroke-width="2">
                <circle cx="8" cy="8" r="7" stroke="#959da5"></circle>
                <path
                  d="m12.9497 3.05025c1.3128 1.31276 2.0503 3.09323 2.0503 4.94975 0 1.85651-.7375 3.637-2.0503 4.9497"
                  stroke="#fafbfc"
                ></path>
              </g>
            </svg>

            ${this.iconTemplate}

            <span class="CheckStep-header-label flex-1 ml-n1 mr-1 css-truncate css-truncate-overflow user-select-none">
              ${this.name}
            </span>

            <div class="text-mono text-normal text-small float-right">${this.time}</div>
          </div>
        </summary>

        <div class="js-checks-log-display">
          <div
            class="text-mono text-small pl-2 py-1 my-2 overflow-auto js-checks-log-display-error log-download-error"
            hidden
          >
            <span class="CheckStep-error-text">Error: </span>
            <span
              class="js-checks-log-display-error-text"
              data-error-text="We are currently unable to download the log. Please try again later."
              data-not-found-text="The log was not found. It may have been deleted based on retention settings."
              data-removed-text="The logs for this run have expired and are no longer available. Logs may have been removed based on retention settings on the repo at the time the run was started."
            ></span>
          </div>
          <div
            class="text-mono text-small py-1 my-2 js-checks-log-display-container ${this.useActionsUx?"mx-2":"ml-2"}"
            hidden
          ></div>
          <div
            class="d-flex flex-items-center pl-2 py-1 my-2 text-small text-mono color-text-white js-checks-log-display-truncated"
            hidden
          >
            <div class="ml-1 color-fg-attention">
              This step has been truncated due to its large size. Download the full logs from the ${this.gearIcon} menu
              once the workflow run has completed.
            </div>
          </div>
        </div>
      </details>`,this)}constructor(...e){super(...e),this.name="",this.number=1,this.conclusion="",this.externalId="",this.logUrl="",this.expand="",this.inProgress=!1,this.startedAt="",this.completedAt="",this.jobCompleted=!1,this.useActionsUx=!1,this.loggedIn=!1}};tc([tl.Lj],td.prototype,"name",void 0),tc([tl.Lj],td.prototype,"number",void 0),tc([tl.Lj],td.prototype,"conclusion",void 0),tc([tl.Lj],td.prototype,"externalId",void 0),tc([tl.Lj],td.prototype,"logUrl",void 0),tc([tl.Lj],td.prototype,"expand",void 0),tc([tl.Lj],td.prototype,"inProgress",void 0),tc([tl.Lj],td.prototype,"startedAt",void 0),tc([tl.Lj],td.prototype,"completedAt",void 0),tc([tl.Lj],td.prototype,"jobCompleted",void 0),tc([tl.Lj],td.prototype,"useActionsUx",void 0),tc([tl.Lj],td.prototype,"loggedIn",void 0),tc([tl.fA],td.prototype,"header",void 0),td=tc([tl.Ih],td);var tu=n(32645),th=n(25945);function tp(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function tg(e,t){var n=tp(e,t,"get");return n.get?n.get.call(e):n.value}function tf(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function tm(e,t,n){var r=tp(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,r,n),n}function ty(e,t){var n=tp(e,t,"update");return function(e,t){if(t.set){if(!t.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(v){t.set.call(e,v)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw TypeError("attempted to set read only private field");return t}(e,n)}function tb(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}!function(e){e[e.StepLog=0]="StepLog",e[e.StepsUpdate=1]="StepsUpdate"}(m||(m={}));let tS=(l=new WeakMap,a=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,h=new WeakMap,p=new WeakMap,g=new WeakMap,(f=class CheckStepsElement extends HTMLElement{connectedCallback(){this.loggedIn&&(this.addEventListener("socket:message",this.handleAliveEvent.bind(this)),this.createOrCloseStreamingLogSocket(),this.isJobCompleted()||this.requestJobSteps())}disconnectedCallback(){tg(this,d).abort(),this.removeEventListener("socket:message",this.handleAliveEvent.bind(this)),this.textContent=""}attributeChangedCallback(e,t,n){if(t!==n)switch(e){case"data-can-stream":case"data-job-status":this.createOrCloseStreamingLogSocket(),this.isJobCompleted()&&this.requestJobSteps()}}handleAliveEvent(e){let t=e?.detail;if(!t)return;let n=t.name?.split(":")?.[0];switch(n){case"check_runs":{let e=t.data;this.jobStatus=e.status,this.canStream=e.streaming_logs;break}case"actions_results":{let e=t.data.kind;if(0===e){let e=t.data.data;this.handleAliveStepLogEvent(e)}else if(1===e){let e=t.data.data;this.handleAliveStepUpdateEvent(e)}}}}handleAliveStepUpdateEvent(e){if(this.stepsFromResults){let t=Math.min(...e.map(e=>e.changeOrder));tm(this,l,t),this.requestJobSteps()}}handleAliveStepLogEvent(e){let t=!1,n=eo[e.stepId],r=e.lines.filter(e=>!tg(this,h).has(e.lineID)),s=r.map(e=>e.line);if(n&&tg(this,p)){let r=n.state;eC(n,s,e.startLine),t=r!==n.state}else{var i,o;for(let e of r)tg(this,h).add(e.lineID);(i=tg(this,g))[o=e.stepId]||(i[o]=[]),tg(this,g)[e.stepId]?.push(...r.map(({line:e,lineID:t})=>({id:t,line:e}))),t=!0}t&&this.requestJobSteps()}createOrCloseStreamingLogSocket(){if(this.stepsFromResults||!this.streamingUrl||!this.canStream)return;let{signal:e}=tg(this,d);if("completed"===this.jobStatus){tg(this,d).abort(),tg(this,u).closeExistingSocket();return}this.requestJobSteps(),tg(this,u).startOrContinueStreaming(this.streamingUrl),tg(this,u).removeEventListener("onStreamFailure",this.handleStreamFailure),tg(this,u).addEventListener("onStreamFailure",this.handleStreamFailure,{signal:e}),tg(this,u).removeEventListener("socketDidReceiveMessage",this.handleSocketDidReceiveMessage),tg(this,u).addEventListener("socketDidReceiveMessage",this.handleSocketDidReceiveMessage,{signal:e})}processSocketMessage(e){let t=!1,n=Array.isArray(e.arguments)?e.arguments:[];for(let e of n){let{lines:n,stepRecordId:r,startLine:s}=e,i=eo[r];if(!i){ey[r]=(ey[r]||[]).concat(n),t=!0;continue}let o=i.state;eC(i,n,s),t=o!==i.state}t&&this.requestJobSteps()}async requestJobSteps(){if(tg(this,a)||!this.jobStepsUrl||this.hasSteps()&&this.areStepsCompleted())return;let e=tg(this,l);tm(this,a,!0);let t=await (0,th.r)(`${this.jobStepsUrl}?change_id=${tg(this,l)}`);if(tm(this,a,!1),!t){await this.waitAndIncrementRetries(),this.requestJobSteps();return}let n=!1;t.length||(n=!0);let r=new Set(...Object.keys(ey));for(let e of t){let t=eo[e.id];if(t){let n=t.container.closest("check-step");this.updateStepAttributes(n,e),n.update(),await this.fetchBackscrolls(n,e)}else this.addStep(e);t?.state!==o.STREAMING||e.started_at||(n=!0),e.completed_at&&!e.completed_log_url&&(n=!0),tm(this,l,Math.max(tg(this,l),e.change_id)),r.delete(e.id)}if(r.size>0||n){if(tg(this,l)===e){let e=await this.waitAndIncrementRetries();if(!e)return}this.requestJobSteps()}else tm(this,c,0)}addStep(e){let t=document.createElement("check-step");t.setAttribute("data-external-id",e.id),this.updateStepAttributes(t,e),this.appendChild(t)}updateStepAttributes(e,t){e.setAttribute("data-name",t.name),e.setAttribute("data-number",String(t.number)),e.setAttribute("data-started-at",t.started_at||""),e.setAttribute("data-completed-at",t.completed_at||""),t.conclusion?(e.setAttribute("data-conclusion",t.conclusion),e.removeAttribute("data-in-progress")):t.started_at&&e.setAttribute("data-in-progress",""),t.log_url&&e.setAttribute("data-log-url",t.log_url),this.useActionsUx&&e.setAttribute("data-use-actions-ux",""),this.loggedIn&&e.setAttribute("data-logged-in",""),this.isJobCompleted()&&e.setAttribute("data-job-completed","")}async fetchBackscrolls(e,t){if(!tg(this,p)&&t.started_at&&!t.conclusion)try{let s=e.getAttribute("data-job-step-backscroll-url");if(!tg(this,p)&&s){var n,r;let e=await (0,th.r)(s);for(let s of((n=tg(this,g))[r=t.id]||(n[r]=[]),e?.lines||[]))tg(this,h).has(s.id)||tg(this,g)[t.id]?.push(s)}}finally{tm(this,p,!0),this.renderAliveBufferAndBackscrolls(t.id,tg(this,g)[t.id]||[])}}renderAliveBufferAndBackscrolls(e,t){if(!t||0===t.length)return;let n=eo[e];if(!n)return;let r=t.sort((e,t)=>{let n=e.id.split("-"),r=t.id.split("-"),s=parseInt(n[0]||"0"),i=parseInt(r[0]||"0");if(s===i){let e=parseInt(n[1]||"0"),t=parseInt(r[1]||"0");return e>t?1:-1}return s>i?1:-1}),s=r[0]?.id?.split("-"),i=parseInt(s?.[1]||"0");eC(n,r.map(e=>e.line),i)}isJobCompleted(){return"completed"===this.jobStatus}areStepsCompleted(){return 0===[...this.querySelectorAll("check-step")].filter(e=>e.hasAttribute("data-in-progress")).length}hasSteps(){return[...this.querySelectorAll("check-step")].length>0}async waitAndIncrementRetries(){tm(this,a,!0);let e=this.isJobCompleted()&&this.areStepsCompleted();return 5===tg(this,c)||e?(tm(this,c,0),tm(this,a,!1),!1):(ty(this,c).value++,await new Promise(e=>setTimeout(e,2e3)),tm(this,a,!1),!0)}constructor(...e){super(...e),tf(this,l,{writable:!0,value:void 0}),tf(this,a,{writable:!0,value:void 0}),tf(this,c,{writable:!0,value:void 0}),tf(this,d,{writable:!0,value:void 0}),tf(this,u,{writable:!0,value:void 0}),tf(this,h,{writable:!0,value:void 0}),tf(this,p,{writable:!0,value:void 0}),tf(this,g,{writable:!0,value:void 0}),this.useActionsUx=!1,this.loggedIn=!1,this.jobStepsUrl="",this.jobStatus="",this.streamingUrl="",this.canStream=!1,this.stepsFromResults=!1,tm(this,l,0),tm(this,a,!1),tm(this,c,0),tm(this,d,new AbortController),tm(this,u,tu.$.getInstance("WatchRunAsync")),tm(this,h,new Set),tm(this,p,!1),tm(this,g,{}),this.handleStreamFailure=()=>{(0,et.b)({incrementKey:"ACTIONS_STREAMING_LOG_VIEWS_FAIL"})},this.handleSocketDidReceiveMessage=e=>{e instanceof CustomEvent&&this.processSocketMessage(e.detail)}}}).observedAttributes=["data-can-stream","data-job-status"],f);tb([tl.Lj],tS.prototype,"useActionsUx",void 0),tb([tl.Lj],tS.prototype,"loggedIn",void 0),tb([tl.Lj],tS.prototype,"jobStepsUrl",void 0),tb([tl.Lj],tS.prototype,"jobStatus",void 0),tb([tl.Lj],tS.prototype,"streamingUrl",void 0),tb([tl.Lj],tS.prototype,"canStream",void 0),tb([tl.Lj],tS.prototype,"stepsFromResults",void 0),tS=tb([tl.Ih],tS)},89359:(e,t,n)=>{function r(e){let t=document.querySelectorAll(e);if(t.length>0)return t[t.length-1]}function s(){return`${window.location.protocol}//${window.location.host}${function(){let e=r("meta[name=analytics-location]");return e?e.content:window.location.pathname}()+function(){let e=r("meta[name=analytics-location-query-strip]"),t="";e||(t=window.location.search);let n=r("meta[name=analytics-location-params]");for(let e of(n&&(t+=(t?"&":"?")+n.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let n=e.content.split(":",2);t=t.replace(RegExp(`(^|[?&])${n[0]}($|=)`,"g"),`$1${n[1]}$2`)}return t}()}`}n.d(t,{S:()=>s})},24601:(e,t,n)=>{n.d(t,{aJ:()=>x,cI:()=>k,eK:()=>m});var r=n(82918),s=n(49237),i=n(28382),o=n(89359),l=n(15981),a=n(53729),c=n(86283),d=n(46426);let u=!1,h=0,p=Date.now(),g=new Set(["Failed to fetch","NetworkError when attempting to fetch resource."]);function f(e){return!!("AbortError"===e.name||"TypeError"===e.name&&g.has(e.message)||e.name.startsWith("ApiError")&&g.has(e.message))}function m(e,t={}){if((0,d.c)("FAILBOT_HANDLE_NON_ERRORS")){if(!(e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message)){if(function(e){if(!e||"boolean"==typeof e||"number"==typeof e)return!0;if("string"==typeof e){if(E.some(t=>e.includes(t)))return!0}else if("object"==typeof e&&"string"==typeof e.message&&"number"==typeof e.code)return!0;return!1}(e))return;let n=Error(),r=function(e){try{return JSON.stringify(e)}catch{return"Unserializable"}}(e),s={type:"UnknownError",value:`Unable to report error, due to a thrown non-Error type: ${typeof e}, with value ${r}`,stacktrace:k(n)};y(S(s,t));return}f(e)||y(S(b(e),t))}else f(e)||y(S(b(e),t))}async function y(e){if(!(!L&&!u&&h<10&&(0,s.Gb)()))return;let t=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(t){if(e.error.stacktrace.some(e=>w.test(e.filename)||w.test(e.function))){u=!0;return}h++;try{await fetch(t,{method:"post",body:JSON.stringify(e)})}catch{}}}function b(e){return{type:e.name,value:e.message,stacktrace:k(e)}}function S(e,t={}){return Object.assign({error:e,sanitizedUrl:(0,o.S)()||window.location.href,readyState:document.readyState,referrer:(0,l.wP)(),timeSinceLoad:Math.round(Date.now()-p),user:x()||void 0,bundler:a.A7,ui:!!document.querySelector('meta[name="ui"]')},t)}function k(e){return(0,i.Q)(e.stack||"").map(e=>({filename:e.file||"",function:String(e.methodName),lineno:(e.lineNumber||0).toString(),colno:(e.column||0).toString()}))}let w=/(chrome|moz|safari)-extension:\/\//;function x(){let e=document.head?.querySelector('meta[name="user-login"]')?.content;if(e)return e;let t=(0,r.b)();return`anonymous-${t}`}let L=!1;if(c.iG?.addEventListener("pageshow",()=>L=!1),c.iG?.addEventListener("pagehide",()=>L=!0),"function"==typeof BroadcastChannel){let e=new BroadcastChannel("shared-worker-error");e.addEventListener("message",e=>{m(e.data.error)})}let E=["Object Not Found Matching Id","Not implemented on this platform","provider because it's not your default extension"]},67044:(e,t,n)=>{n.d(t,{D_:()=>r.D_,EL:()=>r.EL,N9:()=>r.N9,Tz:()=>r.Tz,k0:()=>r.k0});var r=n(11793)},76134:(e,t,n)=>{n.d(t,{Ty:()=>i,YE:()=>o,Zf:()=>a});var r=n(46426),s=n(67044);let i=()=>{let e=document.querySelector("meta[name=keyboard-shortcuts-preference]");return!e||"all"===e.content},o=e=>/Enter|Arrow|Escape|Meta|Control|Esc/.test(e)||e.includes("Alt")&&e.includes("Shift"),l=new Set(["button","checkbox","color","file","hidden","image","radio","range","reset","submit"]),a=e=>{let t=(0,s.EL)(e),n=function(e){if(!(e instanceof HTMLElement))return!1;let t=e.nodeName.toLowerCase(),n=e.getAttribute("type")?.toLowerCase()??"text",r="true"===e.ariaReadOnly||"true"===e.getAttribute("aria-readonly")||null!==e.getAttribute("readonly");return("select"===t||"textarea"===t||"input"===t&&!l.has(n)||e.isContentEditable)&&!r}(e.target)&&(0,r.c)("no_character_key_shortcuts_in_inputs"),a=i()&&!n;return o(t)||a}},95253:(e,t,n)=>{let r;n.d(t,{YT:()=>h,qP:()=>p,yM:()=>g});var s=n(88149),i=n(86058),o=n(44544),l=n(71643);let{getItem:a}=(0,o.Z)("localStorage"),c="dimension_",d=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,s.n)("octolytics");delete e.baseContext,r=new i.R(e)}catch(e){}function u(e){let t=(0,s.n)("octolytics").baseContext||{};if(t)for(let[e,n]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(c)&&(t[e.replace(c,"")]=n,delete t[e]);let n=document.querySelector("meta[name=visitor-payload]");if(n){let e=JSON.parse(atob(n.content));Object.assign(t,e)}let r=new URLSearchParams(window.location.search);for(let[e,n]of r)d.includes(e.toLowerCase())&&(t[e]=n);return t.staff=(0,l.B)().toString(),Object.assign(t,e)}function h(e){r?.sendPageView(u(e))}function p(e,t={}){let n=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,s=n?{service:n}:{};for(let[e,n]of Object.entries(t))null!=n&&(s[e]=`${n}`);if(r){let t=e||"unknown";u(s),r.sendEvent(t,u(s))}}function g(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},45974:(e,t,n)=>{n.d(t,{dy:()=>l.dy,sY:()=>l.sY,Au:()=>l.Au});var r=n(22490),s=n(7180);let i="jtml-no-op",o=r.ZO.createPolicy(i,{createHTML:e=>s.O.apply({policy:()=>e,policyName:i,fallback:e,fallbackOnError:!0})});var l=n(20845);l.js.setCSPTrustedTypesPolicy(o)},56959:(e,t,n)=>{n.d(t,{RB:()=>r,qC:()=>s,w0:()=>Subscription});let Subscription=class Subscription{constructor(e){this.closed=!1,this.unsubscribe=()=>{e(),this.closed=!0}}};function r(e,t,n,r={capture:!1}){return e.addEventListener(t,n,r),new Subscription(()=>{e.removeEventListener(t,n,r)})}function s(...e){return new Subscription(()=>{for(let t of e)t.unsubscribe()})}},7180:(e,t,n)=>{n.d(t,{O:()=>c,d:()=>TrustedTypesPolicyError});var r=n(46426),s=n(71643),i=n(24601),o=n(27856),l=n.n(o),a=n(95253);let TrustedTypesPolicyError=class TrustedTypesPolicyError extends Error{};let c={apply:function({policy:e,policyName:t,fallback:n,fallbackOnError:o=!1,sanitize:c,silenceErrorReporting:d=!1}){try{if((0,r.c)("BYPASS_TRUSTED_TYPES_POLICY_RULES"))return n;(0,s.b)({incrementKey:"TRUSTED_TYPES_POLICY_CALLED",trustedTypesPolicyName:t},!1,.1);let i=e();return c&&new Promise(e=>{let n=window.performance.now(),r=l().sanitize(i,{FORBID_ATTR:[]}),s=window.performance.now();if(i.length!==r.length){let o=Error("Trusted Types policy output sanitized"),l=o.stack?.slice(0,1e3),c=i.slice(0,250);(0,a.qP)("trusted_types_policy.sanitize",{policyName:t,output:c,stack:l,outputLength:i.length,sanitizedLength:r.length,executionTime:s-n}),e(i)}}),i}catch(e){if(e instanceof TrustedTypesPolicyError||(d||(0,i.eK)(e),(0,s.b)({incrementKey:"TRUSTED_TYPES_POLICY_ERROR",trustedTypesPolicyName:t}),!o))throw e}return n}}},22490:(e,t,n)=>{n.d(t,{ZO:()=>c});var r=n(86283),s=n(71643);function i(e){return()=>{throw TypeError(`The policy does not implement the function ${e}`)}}let o={createHTML:i("createHTML"),createScript:i("createScript"),createScriptURL:i("createScriptURL")},l=new Map,a=globalThis.trustedTypes??{createPolicy:(e,t)=>({name:e,...o,...t})},c={createPolicy:(e,t)=>{if(l.has(e))return(0,s.b)({incrementKey:"TRUSTED_TYPES_POLICY_INITIALIZED_TWICE"}),l.get(e);{let n=a.createPolicy(e,t);return l.set(e,n),n}}},d=!1;r.n4?.addEventListener("securitypolicyviolation",e=>{"require-trusted-types-for"!==e.violatedDirective||d||(console.warn(`Hi fellow Hubber!
    You're probably seeing a Report Only Trusted Types error near this message. This is intended behaviour, staff-only,
    does not impact application control flow, and is used solely for statistic collection. Unfortunately we
    can't gather these statistics without adding the above warnings to your console. Sorry about that!
    Feel free to drop by #pse-architecture if you have any additional questions about Trusted Types or CSP.`),d=!0)})}},e=>{var t=t=>e(e.s=t);e.O(0,["vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-a4c183","vendors-node_modules_github_selector-observer_dist_index_esm_js","vendors-node_modules_lit-html_lit-html_js","vendors-node_modules_delegated-events_dist_index_js-node_modules_github_catalyst_lib_index_js-d4ad92","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_remote-form_dist_-b70400","ui_packages_soft-nav_soft-nav_ts"],()=>t(40621)),e.O()}]);
//# sourceMappingURL=workflow-runs-d7923e7b347f.js.map