"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["workflow-run"],{96776:(t,e,i)=>{function o(t,e){return n(function(t){if(t.activeElement!==t.body)return t.activeElement;var e=t.querySelectorAll(":hover"),i=e.length;if(i)return e[i-1]}(t),e)}function n(t,e){var i=t;if(!i)return Promise.resolve(e());var o=i.ownerDocument.documentElement,n=function(t){for(var e=[];t;){var i=t.getBoundingClientRect(),o=i.top,n=i.left;e.push({element:t,top:o,left:n}),t=t.parentElement}return e}(i);return Promise.resolve(e()).then(function(t){var e=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(o.contains(i.element))return i}}(n);if(e){i=e.element;var s=e.top,r=e.left,a=i.getBoundingClientRect(),l=a.top,d=a.left;!function(t,e,i){var o=t.ownerDocument,n=o.defaultView;function s(t){return t.offsetParent?{top:t.scrollTop,left:t.scrollLeft}:{top:n.pageYOffset,left:n.pageXOffset}}function r(t){var e=t;if(e.offsetParent&&e!==o.body){for(;e!==o.body;){if(!e.parentElement)return;e=e.parentElement;var i=n.getComputedStyle(e),s=i.position,r=i.overflowY,a=i.overflowX;if("fixed"===s||"auto"===r||"auto"===a||"scroll"===r||"scroll"===a)break}return e}}for(var a=r(t),l=0,d=0;a;){var h=function(t,e,i){if(0===e&&0===i)return[0,0];var r=s(t),a=r.top+i,l=r.left+e;t===o||t===n||t===o.documentElement||t===o.body?o.defaultView.scrollTo(l,a):(t.scrollTop=a,t.scrollLeft=l);var d=s(t);return[d.left-r.left,d.top-r.top]}(a,e-l,i-d);if(l+=h[0],d+=h[1],l===e&&d===i)break;a=r(a)}}(i,d-r,l-s)}return t})}i.d(e,{_8:()=>o,uQ:()=>n})},25945:(t,e,i)=>{i.d(e,{r:()=>o});async function o(t){try{let e=await fetch(t,{credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(e.ok)return await e.json()}catch{}return null}},32645:(t,e,i)=>{i.d(e,{$:()=>SignalRSocket,C:()=>o});var o,n=i(16544),s=i(25945);function r(t,e,i){return function(t,e){if(t!==e)throw TypeError("Private static access of wrong provenance")}(t,e),!function(t,e){if(void 0===t)throw TypeError("attempted to get private static field before its declaration")}(i,0),i.get?i.get.call(t):i.value}!function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}(o||(o={}));let SignalRSocket=class SignalRSocket extends EventTarget{static getInstance(t){return r(SignalRSocket,SignalRSocket,a).has(t)||r(SignalRSocket,SignalRSocket,a).set(t,new SignalRSocket(t)),r(SignalRSocket,SignalRSocket,a).get(t)}socketDidReceiveMessage(t,e){let i=e.split(SignalRSocket.RECORD_SEPARATOR)[0],o=JSON.parse(i);this.dispatchEvent(new CustomEvent("socketDidReceiveMessage",{detail:o})),7===o.type&&t.close()}socketDidOpen(){this.handshake()}socketDidClose(){}socketDidFinish(){if(this.globalSocket=null,this.shouldTryAgainWithNewSocket){this.shouldTryAgainWithNewSocket=!1;let t=Math.floor(Math.random()*SignalRSocket.JITTER_MAX_MILLISECONDS)+SignalRSocket.JITTER_MIN_MILLISECONDS;setTimeout(()=>this.startOrContinueStreaming(this.xhrConnectionUrl,!0),t)}}socketShouldRetry(t,e){return e===SignalRSocket.ABNORMAL_CLOSURE?(this.shouldTryAgainWithNewSocket=!0,!1):!this.isFatalStatusCode(e)}async startOrContinueStreaming(t,e=!1){this.xhrConnectionUrl||(this.xhrConnectionUrl=t),(!this.isStreaming||e)&&(this.isStreaming=!0,await this.tryStartNewStream(this.xhrConnectionUrl))}closeExistingSocket(){this.globalSocket&&(this.globalSocket.close(),this.globalSocket=null)}onStreamFailure(){this.dispatchEvent(new CustomEvent("onStreamFailure"))}get reconnectWindow(){let t=Math.floor(Math.random()*SignalRSocket.JITTER_MAX_MILLISECONDS)+SignalRSocket.JITTER_MIN_MILLISECONDS;return t}async tryStartNewStream(t){try{let e=await this.retrieveSocketURL(t);if(!e)return;this.socketUrl=e,this.globalSocket=new n.Oo(this.socketUrl,this,{timeout:4e3,attempts:10}),await this.globalSocket.open()}catch(t){throw this.onStreamFailure(),t}}handshake(){let{searchParams:t}=new URL(this.socketUrl,window.location.origin),e=t.get("tenantId"),i=t.get("runId");if(e&&i){this.sendPayload({protocol:"json",version:1});let t={arguments:[e,+i],target:this.target,type:1};this.sendPayload(t)}}isFatalStatusCode(t){return t===SignalRSocket.POLICY_VIOLATION}sendPayload(t){this.globalSocket&&this.globalSocket.send(JSON.stringify(t)+SignalRSocket.RECORD_SEPARATOR)}constructor(t){super(),this.target=t,this.isStreaming=!1,this.shouldTryAgainWithNewSocket=!1,this.retrieveSocketURL=async t=>{let e=await (0,s.r)(t),i=e?.data.authenticated_url;if(!i)return null;let o=await (0,s.r)(i);return o?.logStreamWebSocketUrl??null}}};SignalRSocket.RECORD_SEPARATOR="\x1e",SignalRSocket.ABNORMAL_CLOSURE=1006,SignalRSocket.POLICY_VIOLATION=1008,SignalRSocket.JITTER_MIN_MILLISECONDS=100,SignalRSocket.JITTER_MAX_MILLISECONDS=400;var a={writable:!0,value:new Map}},74277:(t,e,i)=>{var o,n,s,r,a=i(76006);function l(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}let d=((o=class AnnotationMessageElement extends HTMLElement{connectedCallback(){this.annotationTextComponent=this.annotationContainer.firstElementChild,this.initalizeEventListeners()}attributeChangedCallback(){this.expanded?(this.displayShowLessButton(),this.annotationContainer.classList.replace("annotation--contracted","annotation--expanded")):(this.displayShowMoreButton(),this.annotationContainer.classList.replace("annotation--expanded","annotation--contracted"))}toggleExpansion(){this.expanded=!this.expanded}calculateOverflow(){if(this.annotationTextComponent){let t=this.isEllipsisActive(this.annotationTextComponent);if(this.expanded){if(!t){let t=this.isAnnotationWrapped(this.annotationTextComponent);this.expanded&&t?this.displayShowLessButton():t?this.displayShowMoreButton():this.hideBothButtons()}}else t?this.displayShowMoreButton():this.hideBothButtons()}}displayShowLessButton(){this.setButtonHiddenProperties(!1,!0)}displayShowMoreButton(){this.setButtonHiddenProperties(!0,!1)}hideBothButtons(){this.setButtonHiddenProperties(!0,!0)}setButtonHiddenProperties(t,e){this.showLessButton.hidden=t,this.showMoreButton.hidden=e}initalizeEventListeners(){"ResizeObserver"in window?new ResizeObserver(()=>this.calculateOverflow()).observe(this.annotationTextComponent):window.addEventListener("resize",()=>this.calculateOverflow())}isEllipsisActive(t){return t.offsetWidth<t.scrollWidth}isAnnotationWrapped(t){let{lineHeight:e}=getComputedStyle(t),i=parseInt(e.split("px")[0]);return t.scrollHeight>i}constructor(...t){super(...t),this.expanded=!1}}).observedAttributes=["data-expanded"],o);l([a.fA],d.prototype,"showMoreButton",void 0),l([a.fA],d.prototype,"showLessButton",void 0),l([a.fA],d.prototype,"annotationContainer",void 0),l([a.Lj],d.prototype,"expanded",void 0),d=l([a.Ih],d);var h=i(59753);(0,h.on)("click",".js-show-more-environments",function(t){let e=t.target,i=e.closest(".js-hidden-environments-container"),o=i.querySelector(".js-hidden-environments"),n=i.querySelector(".js-shown-environments");n&&n.classList.add("d-none"),o&&o.classList.remove("d-none")}),(0,h.on)("click",".js-gates-dialog-environment-checkbox",function(t){let e=t.target,i=e.closest(".js-gates-dialog");if(null==i)return;let o=i.querySelector(".js-gates-approval-dialog-reject-button"),n=i.querySelector(".js-gates-approval-dialog-approve-button"),s=i.querySelector(".js-gates-approval-dialog-count-display");if(null!=o&&null!=n&&null!=s){let t=i.querySelectorAll(".js-gates-dialog-environment-checkbox:checked"),e=0===t.length;o.disabled=e,n.disabled=e,s.hidden=e,s.textContent=t.length.toString()}let r=e.closest(".ActionsApprovalOverlay-environment");r&&(e.checked?r.classList.add("selected-approval-environment"):r.classList.remove("selected-approval-environment"))});var c=i(4412),u=i(22971);function g(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}let p=class MouseDriver{setupListener(){document.body.addEventListener("pointerup",()=>this.up()),document.body.addEventListener("pointermove",t=>this.move(t)),this.graph.addEventListener("pointerdown",t=>this.down(t)),this.graph.addEventListener("pointermove",t=>this.move(t)),this.graph.addEventListener("click",t=>this.click(t),{capture:!0}),this.graph.addEventListener("wheel",t=>this.handleWheel(t),{capture:!1,passive:!1})}updateCursor(){this.dragging?this.graph.canvas.classList.add("dragging"):this.graph.canvas.classList.remove("dragging")}up(){this.dragging=!1,this.updateCursor()}click(t){(Math.abs(this.dragStartX-t.pageX)>5||Math.abs(this.dragStartY-t.pageY)>5)&&(t.preventDefault(),t.stopPropagation())}down(t){0!==t.button||this.dragging||(this.dragging=!0,this.dragStartX=t.pageX,this.dragStartY=t.pageY,this.lastPoint.x=t.pageX,this.lastPoint.y=t.pageY,this.updateCursor())}move(t){let e=t.pageX,i=t.pageY;if(this.dragging){let e=t.pageX-this.lastPoint.x,i=t.pageY-this.lastPoint.y;this.graph.dragMove(e,i)}this.lastPoint.x=e,this.lastPoint.y=i}handleWheel(t){let e=this.graph.getCurrentZoom();this.graph.setNormalizedZoom(this.graph.getCurrentZoom()-t.deltaY/100),this.graph.setFitToWindowBtnEnabled(!0),this.moveZoomOffset(t,e),t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault()}moveZoomOffset(t,e){let i=this.graph.visualGraph.getBoundingClientRect(),o=(this.graph.getCurrentZoom()-e)/e,n=t.clientX-i.left,s=t.clientY-i.top;this.graph.dragMove(-(n*o*1),-(s*o*1))}constructor(t){this.dragging=!1,this.graph=t,this.lastPoint={x:0,y:0},this.setupListener()}},f=class KeyDriver{moveBothX(t){this.graph.dragMove(t,0)}moveBothY(t){this.graph.dragMove(0,t)}down(t){let e=!0;switch(t.key){case"ArrowLeft":this.moveBothX(100);break;case"ArrowUp":this.moveBothY(30);break;case"ArrowRight":this.moveBothX(-100);break;case"ArrowDown":this.moveBothY(-30);break;default:e=!1}e&&t.preventDefault()}constructor(t){this.graph=t,this.graph.addEventListener("keydown",t=>this.down(t))}},m="active",v="active--in",b="active--out",y=class ActionGraphElement extends HTMLElement{async connectedCallback(){new p(this),new f(this),document.addEventListener("run-sidebar-job-enter",t=>this.jobEnter(t)),document.addEventListener("run-sidebar-job-leave",()=>this.jobLeave()),await c.C,this.drawLines(),this.fitToWindow(),this.visualGraph.style.opacity="1"}cancelEvent(t){t.preventDefault(),t.stopPropagation()}async updateJob({target:t}){await (0,u.x0)(t),this.drawLines()}async expandMatrix(t){let e=t.target,i=e.closest("button")?.getAttribute("data-update-url"),o=e.closest(".js-graph-matrix");o&&i&&(o.setAttribute("data-url",i),await (0,u.x0)(o),this.fitToWindow(!1),this.drawLines())}getCurrentZoom(){return this.currentZoom}dragMove(t,e){let i=Math.round((parseFloat(this.visualGraph.getAttribute("data-x"))||0)+t),o=Math.round((parseFloat(this.visualGraph.getAttribute("data-y"))||0)+e);this.visualGraph.style.transform=`translate(${i}px, ${o}px)`,this.visualGraph.setAttribute("data-x",`${i}`),this.visualGraph.setAttribute("data-y",`${o}`),this.setFitToWindowBtnEnabled(!0)}setFitToWindowBtnEnabled(t){this.zoomFit.disabled=!t}setNormalizedZoom(t){let e=t;e<this.minZoom?e=this.minZoom:t>this.MAX_ZOOM&&(e=this.MAX_ZOOM),this.setZoom(e)}in(){this.zoomOut.disabled=!1,this.setFitToWindowBtnEnabled(!0),this.setNormalizedZoom(this.currentZoom+this.ZOOM_INCREMENT)}out(){this.zoomIn.disabled=!1,this.setFitToWindowBtnEnabled(!0),this.setNormalizedZoom(this.currentZoom-this.ZOOM_INCREMENT)}fit(){this.setFitToWindowBtnEnabled(!1),this.fitToWindow()}setZoomInBtnDisabled(t){this.zoomIn.disabled=t}setZoomOutBtnDisabled(t){this.zoomOut.disabled=t}setZoom(t){this.currentZoom=t,this.setZoomInBtnDisabled(this.MAX_ZOOM===this.currentZoom),this.setZoomOutBtnDisabled(this.minZoom===this.currentZoom),this.stages.style.transform=`scale(${this.currentZoom})`}fitToWindow(t=!0){let e=this.clientWidth-48,i=this.clientHeight-75,o=this.stages.clientWidth,n=this.stages.clientHeight,s=Math.min(Math.min(e/o,i/n),this.MAX_ZOOM);this.minZoom=Math.min(s,this.MAX_ZOOM),t&&(this.setZoom(s),this.visualGraph.style.transform="translate(0, 0)",this.visualGraph.setAttribute("data-x","0"),this.visualGraph.setAttribute("data-y","0"))}mouseEnter(t){this.setHighlightedGroup(t.target.id)}mouseLeave(){this.clearHighlightedGroups()}jobEnter(t){let e=t.detail?.jobId;if(!e)return;let i=this.matrices.find(t=>t.getAttribute("data-job-id")===e);i||(i=this.jobs.find(t=>t.getAttribute("data-job-id")===e));let o=i?.getAttribute("data-group-id");o&&this.setDownstreamHighlightGroups(o)}jobLeave(){this.clearHighlightedGroups()}setDownstreamHighlightGroups(t){if(this.allHighlightedGroupIds=[t],this.visualGraph.classList.add(m),this.toggleClasses(t,[m,b],!0),this.connectorLineHighlights.classList.add(m),!this.dependencies[t])return;let e=new Set(this.getDownstreamIds(t,0));for(let t of e)this.toggleClasses(t,[m,v,b],!0);for(let i of(this.allHighlightedGroupIds=this.allHighlightedGroupIds.concat([...e]),this.pathHighlights)){let o=i.getAttribute("data-from"),n=i.getAttribute("data-to");(o===t||e.has(o))&&e.has(n)&&i.classList.add(m)}}setHighlightedGroup(t){if(this.allHighlightedGroupIds=[t],this.visualGraph.classList.add(m),this.toggleClasses(t,[m,v,b],!0),this.connectorLineHighlights.classList.add(m),!this.dependencies[t])return;for(let e of this.dependencies[t]?.incoming??[])this.toggleClasses(e,[m,v],!0);for(let e of this.dependencies[t]?.outgoing??[])this.toggleClasses(e,[m,b],!0);let e=new Set([t,...this.dependencies[t].incoming,...this.dependencies[t].outgoing]);for(let i of(this.allHighlightedGroupIds=[...e],this.pathHighlights)){let o=i.getAttribute("data-from"),n=i.getAttribute("data-to");(o===t||n===t)&&(e.has(o)||e.has(n))&&i.classList.add(m)}}getDownstreamIds(t,e){if(e>=256)return[];let i=[];for(let o of this.dependencies[t]?.incoming??[])i.push(o),i=i.concat(this.getDownstreamIds(o,e+1));return i}toggleClasses(t,e,i){let o=document.getElementById(t);if(o)for(let t of e)o.classList.toggle(t,i)}clearHighlightedGroups(){if(this.visualGraph.classList.remove(m),0===this.allHighlightedGroupIds.length)return;let t=[m,v,b];for(let e of this.allHighlightedGroupIds){let i=document.getElementById(e);if(i)for(let e of t)i.classList.remove(e)}for(let t of this.pathHighlights)t.classList.remove(m);this.allHighlightedGroupIds=[]}drawLines(){for(let t of this.connectorLines)t.setAttribute("width",`${this.stages.clientWidth}`),t.setAttribute("height",`${this.stages.clientHeight}`);let t=24;this.dependencies={};let e=this.paths.reduce((e,i)=>{let o=this.getLineTarget(i.getAttribute("data-from")),n=this.getLineTarget(i.getAttribute("data-to"));if(!o||!n)return e;let s={path:i,from:o,to:n,direction:this.getPathDirection(o,n)};if(""!==s.direction){let e=Math.abs(o.rect.y-n.rect.y)/2;t=Math.min(t,e)}for(let[t,e,i]of[[o.id,n.id,"incoming"],[n.id,o.id,"outgoing"]])this.dependencies[t]?this.dependencies[t][i].push(e):this.dependencies[t]={incoming:[],outgoing:[],[i]:[e]};return e.push(s),e},[]);for(let i of e)this.renderLine(i,t)}getLineTarget(t){if(!t)return;let e=document.getElementById(t);if(!e)return;let i=this.getRect(e);return{id:t,rect:i,isGroup:!!e?.classList?.contains("WorkflowCard-group")}}renderLine(t,e){let i=this.getPath(e,t.from,t.to,t.direction);t.path.setAttribute("d",i)}getPathDirection(t,e){let i=t.rect,o=e.rect;return i.y===o.y?"":i.x<o.x?i.y>o.y?"up":"down":i.y>o.y?"down":"up"}getRect(t){let e=23;t.classList&&t.classList.contains("WorkflowCard-group")&&(e=39);let i=t.parentElement,o=t.offsetLeft-i.offsetLeft;return{x:t.offsetLeft||0,y:e+(t.offsetTop||0),h:t.offsetHeight||0,w:t.offsetWidth||0,adjust:o}}getPath(t,e,i,o){let n=i.rect.adjust,s=e.rect,r=i.rect;if(s.y===r.y)return`M ${s.x+s.w} ${s.y} H ${r.x}`;if("down"===o){let e=r.x-28-t-n,i=s.y,o=e+t,a=r.y-t;return`
      M ${s.x+s.w} ${s.y}
      H ${e}
      C ${e+t/2} ${i} ${e+t} ${i+t/2} ${e+t} ${i+t}
      V ${a}
      C ${o} ${a+t/2} ${o+t/2} ${a+t} ${o+t} ${a+t}
      H ${r.x}`}if("up"===o){let e=r.x-28-t-n,i=s.y,o=e+t,a=r.y+t;return`
      M ${s.x+s.w} ${s.y}
      H ${e}
      C ${e+t/2} ${i} ${e+t} ${i-t/2} ${e+t} ${i-t}
      V ${a}
      C ${o} ${a-t/2} ${o+t/2} ${a-t} ${o+t} ${a-t}
      H ${r.x}`}return""}constructor(...t){super(...t),this.ZOOM_INCREMENT=.25,this.MAX_ZOOM=1,this.currentZoom=1,this.minZoom=1,this.allHighlightedGroupIds=[],this.dependencies={}}};g([a.fA],y.prototype,"canvas",void 0),g([a.fA],y.prototype,"visualGraph",void 0),g([a.fA],y.prototype,"zoomFit",void 0),g([a.fA],y.prototype,"zoomIn",void 0),g([a.fA],y.prototype,"zoomOut",void 0),g([a.fA],y.prototype,"stages",void 0),g([a.fA],y.prototype,"connectorLineHighlights",void 0),g([a.GO],y.prototype,"connectorLines",void 0),g([a.GO],y.prototype,"paths",void 0),g([a.GO],y.prototype,"pathHighlights",void 0),g([a.GO],y.prototype,"jobs",void 0),g([a.GO],y.prototype,"matrices",void 0),y=g([a.Ih],y);var S=i(32645);function w(t,e,i){if(!e.has(t))throw TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function E(t,e){var i=w(t,e,"get");return i.get?i.get.call(t):i.value}function L(t,e,i){!function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}function k(t,e,i){var o=w(t,e,"set");return!function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=i}}(t,o,i),i}function A(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}let C=(n=new WeakMap,s=new WeakMap,r=new WeakMap,class StreamingGraphJobElement extends HTMLElement{connectedCallback(){let t=this.streamingUrl,{signal:e}=E(this,n);if(!this.shouldStream||!t||this.allRunsConcluded()){E(this,n).abort(),E(this,s).closeExistingSocket();return}E(this,s).startOrContinueStreaming(t),E(this,s).addEventListener("socketDidReceiveMessage",t=>{t instanceof CustomEvent&&this.processSocketMessage(t.detail)},{signal:e})}disconnectedCallback(){E(this,n).abort()}processSocketMessage(t){if(t.type!==S.C.Ping){if("stepProgressUpdates"===t.target)for(let e of t.arguments)for(let t of e)E(this,r).add(t.parentRecordId);for(let t of[...E(this,r)]){let e=document.querySelector(`streaming-graph-job[data-external-id="${t}"]`);if(e){let t="true"===e.getAttribute("data-concluded"),i=!!e.getAttribute("data-url");!t&&i&&(0,u.x0)(e)}}}}allRunsConcluded(){return 0===document.querySelectorAll("streaming-graph-job[data-concluded='false']").length}constructor(...t){super(...t),L(this,n,{writable:!0,value:void 0}),L(this,s,{writable:!0,value:void 0}),L(this,r,{writable:!0,value:void 0}),this.streamingUrl="",this.shouldStream=!1,k(this,n,new AbortController),k(this,s,S.$.getInstance("WatchRunStepsProgressAsync")),k(this,r,new Set)}});A([a.Lj],C.prototype,"streamingUrl",void 0),A([a.Lj],C.prototype,"shouldStream",void 0),C=A([a.Ih],C);let R=class JobSummariesElement extends HTMLElement{connectedCallback(){document.addEventListener("click",this.checkForHashReset.bind(this))}disonnectedCallback(){document.removeEventListener("click",this.checkForHashReset.bind(this))}checkForHashReset(t){let e=this.querySelector("job-summary:target");if(!e||!(t.target instanceof HTMLElement)||e.contains(t.target))return;let i=window.scrollY;window.location.hash="",window.history.replaceState(null,"",window.location.pathname+window.location.search),i&&window.scrollTo({top:i})}};function O(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}R=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}([a.Ih],R);let M=class JobSummaryElement extends HTMLElement{connectedCallback(){this.isLoaded()||this.preloadIfPermalink(),this.fragment&&this.fragment.addEventListener("error",this.handleFragmentError.bind(this))}isLoaded(){return!this.fragment}loadSummary(){this.fragment&&(this.loadButton&&(this.loadButton.hidden=!0),this.error&&(this.error.hidden=!0),this.loader&&(this.loader.hidden=!1),this.fragment.src=new URL(this.contentPath,window.location.origin).toString())}retrySummary(){this.fragment&&(this.fragment.src="",this.loadSummary())}handleFragmentError(){this.loader&&(this.loader.hidden=!0),this.error&&(this.error.hidden=!1)}preloadIfPermalink(){`#${this.id}`===window.location.hash&&this.loadSummary()}};O([a.fA],M.prototype,"fragment",void 0),O([a.fA],M.prototype,"loadButton",void 0),O([a.fA],M.prototype,"retryButton",void 0),O([a.fA],M.prototype,"loader",void 0),O([a.fA],M.prototype,"error",void 0),O([a.Lj],M.prototype,"contentPath",void 0),M=O([a.Ih],M);let T=class RunSummaryElement extends HTMLElement{mouseEnterRerun(t){let e=t.target.getAttribute("data-job-id");e&&this.dispatchEvent(new CustomEvent("run-sidebar-job-enter",{detail:{jobId:e},bubbles:!0}))}mouseLeaveRerun(){this.dispatchEvent(new CustomEvent("run-sidebar-job-leave",{bubbles:!0}))}};T=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}([a.Ih],T)},14840:(t,e,i)=>{i.d(e,{Z:()=>m});let o="data-close-dialog",n=`[${o}]`;function s(t){let e=Array.from(t.querySelectorAll("[autofocus]")).filter(a)[0];e||(e=t,t.setAttribute("tabindex","-1")),e.focus()}function r(t){let e=t.currentTarget;e instanceof Element&&("Escape"===t.key||"Esc"===t.key?(c(e,!1),t.stopPropagation()):"Tab"===t.key&&function(t){if(!(t.currentTarget instanceof Element))return;let e=t.currentTarget.querySelector("details-dialog");if(!e)return;t.preventDefault();let i=Array.from(e.querySelectorAll("*")).filter(a);if(0===i.length)return;let o=t.shiftKey?-1:1,n=e.getRootNode(),s=e.contains(n.activeElement)?n.activeElement:null,r=-1===o?-1:0;if(s instanceof HTMLElement){let t=i.indexOf(s);-1!==t&&(r=t+o)}r<0?r=i.length-1:r%=i.length,i[r].focus()}(t))}function a(t){var e;return t.tabIndex>=0&&!t.disabled&&!(e=t).hidden&&(!e.type||"hidden"!==e.type)&&(e.offsetWidth>0||e.offsetHeight>0)}function l(t){let e=t.querySelector("details-dialog");return!(e instanceof DetailsDialogElement)||e.dispatchEvent(new CustomEvent("details-dialog-close",{bubbles:!0,cancelable:!0}))}function d(t){if(!(t.currentTarget instanceof Element))return;let e=t.currentTarget.closest("details");e&&e.hasAttribute("open")&&!l(e)&&(t.preventDefault(),t.stopPropagation())}function h(t){let e=t.currentTarget;if(!(e instanceof Element))return;let i=e.querySelector("details-dialog");if(i instanceof DetailsDialogElement){if(e.hasAttribute("open")){let t="getRootNode"in i?i.getRootNode():document;t.activeElement instanceof HTMLElement&&f.set(i,{details:e,activeElement:t.activeElement}),s(i),e.addEventListener("keydown",r)}else{for(let t of i.querySelectorAll("form"))t.reset();let t=function(t,e){let i=f.get(e);return i&&i.activeElement instanceof HTMLElement?i.activeElement:t.querySelector("summary")}(e,i);t&&t.focus(),e.removeEventListener("keydown",r)}}}function c(t,e){e!==t.hasAttribute("open")&&(e?t.setAttribute("open",""):l(t)&&t.removeAttribute("open"))}function u(t){let e=t.currentTarget;if(!(e instanceof Element))return;let i=e.querySelector("details-dialog");if(!(i instanceof DetailsDialogElement))return;let o=i.querySelector("include-fragment:not([src])");if(!o)return;let n=i.src;null!==n&&(o.addEventListener("loadend",()=>{e.hasAttribute("open")&&s(i)}),o.setAttribute("src",n),p(e))}function g(t,e,i){p(t),e&&t.addEventListener("toggle",u,{once:!0}),e&&i&&t.addEventListener("mouseover",u,{once:!0})}function p(t){t.removeEventListener("toggle",u),t.removeEventListener("mouseover",u)}let f=new WeakMap;let DetailsDialogElement=class DetailsDialogElement extends HTMLElement{static get CLOSE_ATTR(){return o}static get CLOSE_SELECTOR(){return n}constructor(){super(),f.set(this,{details:null,activeElement:null}),this.addEventListener("click",function({target:t}){if(!(t instanceof Element))return;let e=t.closest("details");e&&t.closest(n)&&c(e,!1)})}get src(){return this.getAttribute("src")}set src(t){this.setAttribute("src",t||"")}get preload(){return this.hasAttribute("preload")}set preload(t){t?this.setAttribute("preload",""):this.removeAttribute("preload")}connectedCallback(){this.setAttribute("role","dialog"),this.setAttribute("aria-modal","true");let t=f.get(this);if(!t)return;let e=this.parentElement;if(!e)return;let i=e.querySelector("summary");i&&(i.hasAttribute("role")||i.setAttribute("role","button"),i.addEventListener("click",d,{capture:!0})),e.addEventListener("toggle",h),t.details=e,g(e,this.src,this.preload)}disconnectedCallback(){let t=f.get(this);if(!t)return;let{details:e}=t;if(!e)return;e.removeEventListener("toggle",h),p(e);let i=e.querySelector("summary");i&&i.removeEventListener("click",d,{capture:!0}),t.details=null}toggle(t){let e=f.get(this);if(!e)return;let{details:i}=e;i&&c(i,t)}static get observedAttributes(){return["src","preload"]}attributeChangedCallback(){let t=f.get(this);if(!t)return;let{details:e}=t;e&&g(e,this.src,this.preload)}};let m=DetailsDialogElement;window.customElements.get("details-dialog")||(window.DetailsDialogElement=DetailsDialogElement,window.customElements.define("details-dialog",DetailsDialogElement))}},t=>{var e=e=>t(t.s=e);t.O(0,["vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-a4c183","vendors-node_modules_github_selector-observer_dist_index_esm_js","vendors-node_modules_morphdom_dist_morphdom-esm_js","vendors-node_modules_delegated-events_dist_index_js-node_modules_github_catalyst_lib_index_js-d4ad92","ui_packages_soft-nav_soft-nav_ts","app_assets_modules_github_updatable-content_ts"],()=>e(74277)),t.O()}]);
//# sourceMappingURL=workflow-run-2a9551db7f0a.js.map